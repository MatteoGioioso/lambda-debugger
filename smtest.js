const SourceMapConsumer = require('source-map').SourceMapConsumer
const convertSM = require('convert-source-map')


const data = convertSM
    .fromBase64('eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm15UHJvbWlzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiaGFuZGxlciIsImV2ZW50IiwiY29udGV4dCIsImZpcnN0TnVtYmVyIiwic2Vjb25kTnVtYmVyIiwiYWRkaXRpb24iLCJteU9iamVjdCIsImNvbnNvbGUiLCJsb2ciLCJtdWx0aXBsaWVyIiwibXVsdGlwbGljYXRpb24iLCJib2R5Iiwic3RhdHVzQ29kZSIsIm1lc3NhZ2UiLCJzdGFjayIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7Ozs7Ozs7O0FBRUEsU0FBU0EsU0FBVCxHQUFxQjtBQUNqQixTQUFPQyxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsRUFBaEIsQ0FBUDtBQUNIOztTQUVjQyxPOzs7OztxRUFBZixpQkFBdUJDLEtBQXZCLEVBQThCQyxPQUE5QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVjQyxZQUFBQSxXQUZkLEdBRTRCLENBRjVCO0FBR2NDLFlBQUFBLFlBSGQsR0FHNkIsQ0FIN0I7QUFJY0MsWUFBQUEsUUFKZCxHQUl5QixzQkFBSUYsV0FBSixFQUFpQkMsWUFBakIsQ0FKekI7QUFLUSwwQ0FBWUUscUJBQVo7QUFDQUMsWUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlILFFBQVo7QUFOUjtBQUFBLG1CQU9pQ1IsU0FBUyxFQVAxQzs7QUFBQTtBQU9jWSxZQUFBQSxVQVBkO0FBUWNDLFlBQUFBLGNBUmQsR0FRK0IsMkJBQVNMLFFBQVQsRUFBbUJJLFVBQW5CLENBUi9CO0FBU1FGLFlBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRSxjQUFaO0FBVFIsNkNBVWU7QUFDSEMsY0FBQUEsSUFBSSxFQUFFLE1BREg7QUFFSEMsY0FBQUEsVUFBVSxFQUFFO0FBRlQsYUFWZjs7QUFBQTtBQUFBO0FBQUE7QUFnQlFMLFlBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQUVLLE9BQWQsRUFBdUIsWUFBRUMsS0FBekI7QUFoQlIsNkNBaUJlO0FBQ0hILGNBQUFBLElBQUksRUFBRSxNQURIO0FBRUhDLGNBQUFBLFVBQVUsRUFBRTtBQUZULGFBakJmOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEc7Ozs7QUF3QkFHLE9BQU8sQ0FBQ2YsT0FBUixHQUFrQixnQ0FBZUEsT0FBZixDQUFsQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvbWFkZW8vRGV2ZWxvcG1lbnQvVG9vbHMvbGFtYmRhLWRlYnVnZ2VyL19fdGVzdF9fL2ludGVncmF0aW9uL3Rlc3RGdW5jdGlvblNvdXJjZU1hcC8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2FkZCwgYnVpbGRPYmplY3QsIG11bHRpcGx5LCBteU9iamVjdH0gZnJvbSBcIi4vbGliL215RnVuY3Rpb25zXCJcbmltcG9ydCBsYW1iZGFEZWJ1Z2dlciBmcm9tICdsYW1iZGEtZGVidWdnZXInXG5cbmZ1bmN0aW9uIG15UHJvbWlzZSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKDIwKVxufVxuXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVyKGV2ZW50LCBjb250ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlyc3ROdW1iZXIgPSAzXG4gICAgICAgIGNvbnN0IHNlY29uZE51bWJlciA9IDZcbiAgICAgICAgY29uc3QgYWRkaXRpb24gPSBhZGQoZmlyc3ROdW1iZXIsIHNlY29uZE51bWJlcik7XG4gICAgICAgIGJ1aWxkT2JqZWN0KG15T2JqZWN0KVxuICAgICAgICBjb25zb2xlLmxvZyhhZGRpdGlvbilcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGF3YWl0IG15UHJvbWlzZSgpXG4gICAgICAgIGNvbnN0IG11bHRpcGxpY2F0aW9uID0gbXVsdGlwbHkoYWRkaXRpb24sIG11bHRpcGxpZXIpXG4gICAgICAgIGNvbnNvbGUubG9nKG11bHRpcGxpY2F0aW9uKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9keTogJ2RvbmUnLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogMjAwXG4gICAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlLCBlLnN0YWNrKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9keTogJ29vcHMnLFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogNTAwXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydHMuaGFuZGxlciA9IGxhbWJkYURlYnVnZ2VyKGhhbmRsZXIpXG5cbiJdfQ==')
    .toJSON()

const readSM = async data => {
    await SourceMapConsumer.with(data, null, consumer => {
        const nullablePosition = consumer.originalPositionFor({
            line: 27,
            column: 0,
            bias: SourceMapConsumer.LEAST_UPPER_BOUND
        });
        console.log(nullablePosition)

        consumer.eachMapping(function (m) {
            if (m.source && (m.source.includes('myFunctions.js') || m.source.includes('index.js'))) {
                if (m.name === 'firstNumber'){
                    console.log(m)
                }
            }
        }, null, SourceMapConsumer.ORIGINAL_ORDER);
    })
}

readSM(data).then()
